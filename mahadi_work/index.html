<!DOCTYPE html>
<html lang="bn">
<head>
  <link rel="icon" href="logo.jpg" href="/static/favicon.ico" />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Shop ‚Äî Mahadi enterprise </title>
  <style>
    :root{
      --bg: #fff;
      --surface: #fff;
      --muted: #6b6b6b;
      --text: #111827;
      --accent: #e63946; 
      --accent-dark: #b02a36;
      --glass: rgba(230,57,70,0.06);
      --shadow: 0 10px 30px rgba(15,15,15,0.08);
      --radius-lg: 12px;
      --radius-sm: 8px;
      --container-max: 1100px;
      --mono: ui-monospace, SFMono-Regular, "Roboto Mono", "Segoe UI Mono", "Courier New", monospace;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html,body { height:100%; }
    body{
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color: var(--text);
      background: linear-gradient(180deg, #fff 0%, #fff 60%, #fffafa 100%);
      padding: 28px 12px;
    }

    .container { max-width:var(--container-max); margin:0 auto; padding:0 16px; }
    header { display:flex; justify-content:space-between; align-items:center; gap:14px; margin-bottom:20px; }
    .brand { display:flex; align-items:center; gap:12px; }
    .logo {
      width:56px; height:56px; border-radius:14px;
      background: linear-gradient(135deg, var(--accent), var(--accent-dark));
      display:flex; align-items:center; justify-content:center; color:#fff; font-weight:800;
      box-shadow: 0 8px 30px rgba(230,57,70,0.18);
      font-family: var(--mono);
    }
    h1 { font-size:20px; line-height:1.05; color:var(--text); }
    .subtitle { font-size:13px; color:var(--muted); }

    .controls { display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin:18px 0; }
    .search {
      flex:1;
      display:flex; gap:10px; align-items:center;
      background: #fff;
      padding:10px; border-radius:999px; box-shadow: var(--shadow);
      border:1px solid rgba(0,0,0,0.04);
    }
    .search svg { opacity:.6; }
    .search input { border:0; outline:none; width:100%; font-size:15px; color:var(--text); }

    .grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:16px; margin-bottom:28px; }
    .card {
      background: var(--surface);
      border-radius: var(--radius-lg);
      padding:12px;
      box-shadow: var(--shadow);
      display:flex; flex-direction:column; gap:10px;
      transition: transform .18s ease, box-shadow .18s ease;
      border: 1px solid rgba(0,0,0,0.03);
    }
    .card:hover { transform: translateY(-6px); box-shadow: 0 18px 40px rgba(12,12,12,0.12); }
    .imgwrap { height:160px; border-radius:10px; overflow:hidden; display:flex; align-items:center; justify-content:center; background:var(--glass); }
    .imgwrap img { width:100%; height:100%; object-fit:cover; display:block; transition: transform .5s ease; }
    .card:hover .imgwrap img { transform: scale(1.06); }

    .title { font-weight:700; font-size:15px; color:var(--text); }
    .price { color:var(--accent); font-weight:800; font-size:16px; }
    .meta { font-size:13px; color:var(--muted); text-transform:capitalize; }

    .card .actions { margin-top:auto; display:flex; gap:8px; }
    .btn {
      flex:1; padding:10px 12px; border-radius:10px; border:0; cursor:pointer; font-weight:700; font-size:14px;
      transition: transform .12s ease, box-shadow .12s ease;
    }
    .btn:hover { transform: translateY(-2px); }
    .btn-primary {
      background: linear-gradient(180deg, var(--accent), var(--accent-dark));
      color: #fff;
      box-shadow: 0 8px 24px rgba(230,57,70,0.18);
      border: 1px solid rgba(0,0,0,0.04);
    }
    .btn-outline {
      background: #fff;
      color: var(--text);
      border: 1px solid rgba(0,0,0,0.06);
    }

    .modal-backdrop {
      position:fixed; inset:0; background: rgba(0,0,0,0.45); display:none;
      align-items:center; justify-content:center; z-index:60; padding:20px;
    }
    .modal {
      width:100%; max-width:820px; background: #fff; border-radius:14px; overflow:hidden;
      box-shadow: 0 40px 100px rgba(12,12,12,0.35); display:flex; gap:18px; padding:18px;
    }
    .modal .left { flex:1; min-width:220px; }
    .modal .right { flex:1; display:flex; flex-direction:column; gap:12px; }
    .modal .product-img { width:100%; height:340px; object-fit:cover; border-radius:10px; background:var(--glass); }

    /* New style for delivery section inside modal */
    .modal-delivery-section {
        padding: 15px; /* Added padding */
        background: #fdfdfd; /* Lighter background */
        border: 1px solid rgba(0,0,0,0.04); /* Subtle border */
        border-radius: 10px; /* Rounded corners */
        margin-top: 15px; /* Space above */
        margin-bottom: 15px; /* Space below */
    }

    .order-actions { display:flex; gap:10px; margin-top:8px; }
    .call-btn { background: linear-gradient(180deg, #1fa12a, #138b1d); color:#fff; padding:12px 14px; border-radius:10px; border:0; cursor:pointer; flex:1; font-weight:800; }
    .wa-btn { background: linear-gradient(180deg, #25D366, #1aa05a); color:#fff; padding:12px 14px; border-radius:10px; border:0; cursor:pointer; flex:1; font-weight:800; }

    .floating { position:fixed; right:18px; bottom:18px; display:flex; flex-direction:column; gap:10px; z-index:80; }
    .floating a {
      display:flex; align-items:center; gap:10px; padding:12px 16px; border-radius:999px;
      box-shadow: 0 14px 40px rgba(12,12,12,0.12); background:#fff; text-decoration:none; color:var(--text); font-weight:800;
      border: 1px solid rgba(0,0,0,0.06);
    }
    .floating .call { background: linear-gradient(90deg, #ff7a7a, var(--accent)); color:#fff; border: 0; box-shadow: 0 12px 30px rgba(230,57,70,0.14); }
    .floating .wa { background: linear-gradient(90deg, #25D366, #1aa05a); color:#fff; border: 0; }

    #contact-info { font-weight:700; color:var(--accent); }

    @media (max-width:900px){
      .grid { grid-template-columns:repeat(auto-fill,minmax(200px,1fr)); gap:12px; }
      header { gap:10px; }
    }
    @media (max-width:700px){
      header { flex-direction:column; align-items:flex-start; gap:8px; }
      .modal { flex-direction:column; padding:14px; }
      .modal .product-img { height:220px; }
      .controls { gap:8px; }
    }
  </style>
</head>
<body>
  
<div class="container">
<header>
  <div class="brand">
    <nav>
    <img src="logo.png" alt="Mahadi Enterprise Logo">

  </nav>
    
    <div>
      <h1>Mahadi enterprise ‚Äî Shop </h1>
      <div class="subtitle">Click order ‚Üí Call or WhatsApp.</div>
    </div>
  </div>
  <div class="subtitle" id="contact-info">Order: +8801910102212</div>
</header>

<div class="controls">
  <div class="search">
    <svg width="18" height="18" viewBox="0 0 24 24" style="opacity:.6"><path fill="currentColor" d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zM10 15a5 5 0 110-10 5 5 0 010 10z"/></svg>
    <input id="searchInput" placeholder="Search product name..." />
  </div>
</div>

<main>
  <div class="grid" id="productGrid"></div>
</main>

<!-- Removed delivery-section from here -->

</div>

<div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="left">
      <img src="gas.png" alt="" class="product-img" id="modalImg">
    </div>
    <div class="right">
      <div>
        <h2 id="modalTitle">Product Name</h2>
        
        <div class="meta" id="modalCategory">Category ‚Ä¢ <span id="modalPrice">‡ß≥0</span></div>
      </div>
      <div id="modalDescription" style="color:#444;">Product description goes here. Quality and details.</div>
      <div style="display:flex; gap:8px; margin-top:6px;">
        <div style="font-weight:700;">Price:</div>
        <div style="font-size:18px; color:#1b8b5a; font-weight:800;" id="modalPriceBig">‡ß≥0</div>
      </div>

      <!-- Moved delivery-section here, inside the modal -->
      <section id="modal-delivery-section" class="modal-delivery-section">
        <h2 style="text-align:center;color:#e63946;font-size:18px;margin-bottom:12px;">‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶ì ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú</h2>
        <label for="modalLocation" style="display:block;margin-bottom:8px;font-weight:700;color:#111;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®:</label>
        <select id="modalLocation" style="width:100%;padding:10px;font-size:14px;border:1px solid #ccc;border-radius:8px;margin-bottom:10px;">
          <option value="">-- ‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶õ‡¶æ‡¶á ‡¶ï‡¶∞‡ßÅ‡¶® --</option>
          <option value="‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞">‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞</option>
          <option value="‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶™‡¶æ‡¶∞‡¶æ">‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶™‡¶æ‡¶∞‡¶æ</option>
          <option value="‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá‡¶™‡¶æ‡¶∞‡¶æ">‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá‡¶™‡¶æ‡¶∞‡¶æ</option>
          <option value="‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶™‡¶ö‡ßç‡¶ö‡¶ø‡¶Æ‡¶™‡¶æ‡¶∞‡¶æ">‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶™‡¶ö‡ßç‡¶ö‡¶ø‡¶Æ‡¶™‡¶æ‡¶∞‡¶æ</option>
          <option value="‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶ü‡¶ø‡¶≤‡¶æ‡¶™‡¶æ‡¶∞‡¶æ">‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶ü‡¶ø‡¶≤‡¶æ‡¶™‡¶æ‡¶∞‡¶æ</option>
          <option value="‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶Æ‡ßÅ‡¶∏‡¶≤‡¶ø‡¶Æ ‡¶®‡¶ó‡¶∞">‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶Æ‡ßÅ‡¶∏‡¶≤‡¶ø‡¶Æ ‡¶®‡¶ó‡¶∞</option>
          <option value="‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶π‡¶æ‡¶â‡¶ú‡¶ø‡¶Ç">‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶π‡¶æ‡¶â‡¶ú‡¶ø‡¶Ç</option>
          <option value="‡¶Æ‡ßÅ‡¶∏‡¶≤‡¶ø‡¶Æ ‡¶®‡¶ó‡¶∞ ‡¶π‡¶æ‡¶â‡¶ú‡¶ø‡¶Ç">‡¶Æ‡ßÅ‡¶∏‡¶≤‡¶ø‡¶Æ ‡¶®‡¶ó‡¶∞ ‡¶π‡¶æ‡¶â‡¶ú‡¶ø‡¶Ç</option>
          <option value="‡¶π‡¶æ‡¶∏‡¶®‡¶æ‡¶¨‡¶æ‡¶¶ ‡¶π‡¶æ‡¶â‡¶ú‡¶ø‡¶Ç">‡¶π‡¶æ‡¶∏‡¶®‡¶æ‡¶¨‡¶æ‡¶¶ ‡¶π‡¶æ‡¶â‡¶ú‡¶ø‡¶Ç</option>
          <option value="‡¶Æ‡ßÅ‡¶∏‡¶≤‡¶ø‡¶Æ ‡¶®‡¶ó‡¶∞ ‡¶ï‡¶ø‡¶â‡¶ü ‡¶´‡¶æ‡¶∞‡ßç‡¶®‡¶ø‡¶ö‡¶æ‡¶∞">‡¶Æ‡ßÅ‡¶∏‡¶≤‡¶ø‡¶Æ ‡¶®‡¶ó‡¶∞ ‡¶ï‡¶ø‡¶â‡¶ü ‡¶´‡¶æ‡¶∞‡ßç‡¶®‡¶ø‡¶ö‡¶æ‡¶∞</option>
          <option value="‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞">‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞</option>
          <option value="‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶™‡¶æ‡¶∞‡¶æ">‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶™‡¶æ‡¶∞‡¶æ</option>
          <option value="‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá‡¶™‡¶æ‡¶∞‡¶æ">‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá‡¶™‡¶æ‡¶∞‡¶æ</option>
          <option value="‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ ‡¶™‡¶ö‡ßç‡¶ö‡¶ø‡¶Æ‡¶™‡¶æ‡¶∞‡¶æ">‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ ‡¶™‡¶ö‡ßç‡¶ö‡¶ø‡¶Æ‡¶™‡¶æ‡¶∞‡¶æ</option>
          <option value="‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ ‡¶Ü‡¶≤‡ßÄ‡¶Æ ‡¶¨‡ßá‡¶™‡¶æ‡¶∞‡ßÄ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶">‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ ‡¶Ü‡¶≤‡ßÄ‡¶Æ ‡¶¨‡ßá‡¶™‡¶æ‡¶∞‡ßÄ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶</option>
          <option value="‡¶ú‡¶ø‡ßü‡¶∏‡¶§‡¶≤‡¶æ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞">‡¶ú‡¶ø‡ßü‡¶∏‡¶§‡¶≤‡¶æ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞</option>
          <option value="‡¶ú‡¶ø‡¶®‡ßç‡¶¶‡¶æ‡¶™‡¶ø‡¶∞ ‡¶Æ‡¶æ‡¶ú‡¶æ‡¶∞">‡¶ú‡¶ø‡¶®‡ßç‡¶¶‡¶æ‡¶™‡¶ø‡¶∞ ‡¶Æ‡¶æ‡¶ú‡¶æ‡¶∞</option>
          <option value="‡¶¨‡¶∏‡ßÅ‡¶®‡ßç‡¶ß‡¶∞‡¶æ ‡¶∞‡¶ø‡ßü‡¶æ‡¶∞‡¶≠‡¶ø‡¶â ‡¶π‡¶æ‡¶∏‡¶®‡¶æ‡¶¨‡¶æ‡¶¶">‡¶¨‡¶∏‡ßÅ‡¶®‡ßç‡¶ß‡¶∞‡¶æ ‡¶∞‡¶ø‡ßü‡¶æ‡¶∞‡¶≠‡¶ø‡¶â ‡¶π‡¶æ‡¶∏‡¶®‡¶æ‡¶¨‡¶æ‡¶¶</option>
          <option value="‡¶¨‡¶∏‡ßÅ‡¶®‡ßç‡¶ß‡¶∞‡¶æ ‡¶∞‡¶ø‡ßü‡¶æ‡¶∞‡¶≠‡¶ø‡¶â ‡¶Æ‡ßÅ‡¶∏‡¶≤‡¶ø‡¶Æ ‡¶®‡¶ó‡¶∞">‡¶¨‡¶∏‡ßÅ‡¶®‡ßç‡¶ß‡¶∞‡¶æ ‡¶∞‡¶ø‡ßü‡¶æ‡¶∞‡¶≠‡¶ø‡¶â ‡¶Æ‡ßÅ‡¶∏‡¶≤‡¶ø‡¶Æ ‡¶®‡¶ó‡¶∞</option>
          <option value="‡¶¨‡¶∏‡ßÅ‡¶®‡ßç‡¶ß‡¶∞‡¶æ ‡¶∞‡¶ø‡ßü‡¶æ‡¶∞‡¶≠‡¶ø‡¶â ‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ">‡¶¨‡¶∏‡ßÅ‡¶®‡ßç‡¶ß‡¶∞‡¶æ ‡¶∞‡¶ø‡ßü‡¶æ‡¶∞‡¶≠‡¶ø‡¶â ‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ</option>
        </select>
        <div id="modalChargeDisplay" style="background:#fef2f2;border:1px solid #e63946;color:#e63946;padding:10px;border-radius:8px;font-weight:bold;text-align:center;display:none;">
          ‡¶°‡ßá‡¶≤‡¶ø‡¶≠‡¶æ‡¶∞‡¶ø ‡¶ö‡¶æ‡¶∞‡ßç‡¶ú: <span id="modalDeliveryCharge">0</span> ‡¶ü‡¶æ‡¶ï‡¶æ
        </div>
      </section>
      <!------------------------------------------------->

      <div class="order-actions">
        <button class="call-btn" id="modalCallBtn">üìû Call to Order</button>
        <button class="wa-btn" id="modalWaBtn">üí¨ WhatsApp Order</button>
      </div>
      <div style="display:flex; justify-content:space-between; gap:8px; margin-top:8px;">
        <button class="btn btn-outline" id="closeModal">Close</button>
        <div style="font-size:13px; color:#666; align-self:center;">Tip: You can edit number in JS.</div>
      </div>
    </div>
  </div>
</div>

<div class="floating" aria-hidden="false">
  <a href="#" id="floatCall" class="call">üìû Call</a>
  <a href="#" id="floatWa" class="wa">üí¨ WhatsApp</a>
</div>

<script>
const SHOP_PHONE_DISPLAY = "+8801910102212";
const SHOP_PHONE_TEL = "+8801910102212";
const SHOP_PHONE_WA = "8801910102212";
const DEFAULT_WA_MESSAGE = "Hi, I want to order this product. Please help me with details.";

const products = [
  {id:"p1",name:"Lp Gas ",price:550,category:"clothes",img:"gas.png",desc:"Soft premium cotton, comfortable fit."},
  {id:"p2",name:"Lp Gas",price:300,category:"food",img:"gas.png",desc:"House-made murabba with balanced spice and sweetness."},
  {id:"p3",name:"Lp Gas",price:750,category:"accessories",img:"gas.png",desc:"Genuine leather, slim design with multiple card slots."}
];

const productGrid = document.getElementById("productGrid");
const searchInput = document.getElementById("searchInput");
const contactInfo = document.getElementById("contact-info");

const modalBackdrop = document.getElementById("modalBackdrop");
const modalImg = document.getElementById("modalImg");
const modalTitle = document.getElementById("modalTitle");
const modalDescription = document.getElementById("modalDescription");
const modalPrice = document.getElementById("modalPrice");
const modalPriceBig = document.getElementById("modalPriceBig");
const modalCategory = document.getElementById("modalCategory");
const modalCallBtn = document.getElementById("modalCallBtn");
const modalWaBtn = document.getElementById("modalWaBtn");
const closeModalBtn = document.getElementById("closeModal");

const floatCall = document.getElementById("floatCall");
const floatWa = document.getElementById("floatWa");

// Updated IDs for elements moved into the modal
const modalLocationSelect = document.getElementById("modalLocation");
const modalChargeDisplay = document.getElementById("modalChargeDisplay");
const modalChargeSpan = document.getElementById("modalDeliveryCharge");

const locationCharges = {
   "‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞": 40,
  "‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶™‡¶æ‡¶∞‡¶æ": 50,
  "‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá‡¶™‡¶æ‡¶∞‡¶æ": 50,
  "‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶™‡¶ö‡ßç‡¶ö‡¶ø‡¶Æ‡¶™‡¶æ‡¶∞‡¶æ": 65,
  "‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶ü‡¶ø‡¶≤‡¶æ‡¶™‡¶æ‡¶∞‡¶æ": 55,
  "‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶Æ‡ßÅ‡¶∏‡¶≤‡¶ø‡¶Æ ‡¶®‡¶ó‡¶∞": 50,
  "‡¶á‡¶ï‡ßÅ‡¶∞‡¶ø‡ßü‡¶æ ‡¶π‡¶æ‡¶â‡¶ú‡¶ø‡¶Ç": 49,
  "‡¶Æ‡ßÅ‡¶∏‡¶≤‡¶ø‡¶Æ ‡¶®‡¶ó‡¶∞ ‡¶π‡¶æ‡¶â‡¶ú‡¶ø‡¶Ç": 49,
  "‡¶π‡¶æ‡¶∏‡¶®‡¶æ‡¶¨‡¶æ‡¶¶ ‡¶π‡¶æ‡¶â‡¶ú‡¶ø‡¶Ç": 60,
  "‡¶Æ‡ßÅ‡¶∏‡¶≤‡¶ø‡¶Æ ‡¶®‡¶ó‡¶∞ ‡¶ï‡¶ø‡¶â‡¶ü ‡¶´‡¶æ‡¶∞‡ßç‡¶®‡¶ø‡¶ö‡¶æ‡¶∞": 50,
  "‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞": 50,
  "‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ ‡¶™‡ßÇ‡¶∞‡ßç‡¶¨‡¶™‡¶æ‡¶∞‡¶æ": 60,
  "‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá‡¶™‡¶æ‡¶∞‡¶æ": 60,
  "‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ ‡¶™‡¶ö‡ßç‡¶ö‡¶ø‡¶Æ‡¶™‡¶æ‡¶∞‡¶æ": 60,
  "‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ ‡¶Ü‡¶≤‡ßÄ‡¶Æ ‡¶¨‡ßá‡¶™‡¶æ‡¶∞‡ßÄ ‡¶Æ‡¶∏‡¶ú‡¶ø‡¶¶": 50,
  "‡¶ú‡¶ø‡ßü‡¶∏‡¶§‡¶≤‡¶æ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞": 60,
  "‡¶ú‡¶ø‡¶®‡ßç‡¶¶‡¶æ‡¶™‡¶ø‡¶∞ ‡¶Æ‡¶æ‡¶ú‡¶æ‡¶∞": 60,
  "‡¶¨‡¶∏‡ßÅ‡¶®‡ßç‡¶ß‡¶∞‡¶æ ‡¶∞‡¶ø‡ßü‡¶æ‡¶∞‡¶≠‡¶ø‡¶â ‡¶π‡¶æ‡¶∏‡¶®‡¶æ‡¶¨‡¶æ‡¶¶": 60,
  "‡¶¨‡¶∏‡ßÅ‡¶®‡ßç‡¶ß‡¶∞‡¶æ ‡¶∞‡¶ø‡ßü‡¶æ‡¶∞‡¶≠‡¶ø‡¶â ‡¶Æ‡ßÅ‡¶∏‡¶≤‡¶ø‡¶Æ ‡¶®‡¶ó‡¶∞": 55,
  "‡¶¨‡¶∏‡ßÅ‡¶®‡ßç‡¶ß‡¶∞‡¶æ ‡¶∞‡¶ø‡ßü‡¶æ‡¶∞‡¶≠‡¶ø‡¶â ‡¶¨‡ßá‡ßü‡¶æ‡¶∞‡¶æ": 65
};

contactInfo.textContent = "Order: " + SHOP_PHONE_DISPLAY;

function openLink(url, targetBlank=false){ if(targetBlank) window.open(url,"_blank"); else window.location.href=url; }

function renderProducts(list){
  productGrid.innerHTML = "";
  if(!list.length){ 
    productGrid.innerHTML="<div style='grid-column:1/-1;text-align:center;color:#666;padding:30px;'>No products found.</div>"; 
    return; 
  }
  
  list.forEach(p=>{
    const card=document.createElement("article");
    card.className="card";
    card.innerHTML=`
      <div class="imgwrap"><img loading="lazy" src="${p.img}" alt="${p.name}"></div>
      <div class="title">${p.name}</div>
      <div class="meta">${p.category}</div>
      <div style="display:flex; justify-content:space-between; align-items:center; gap:8px;">
        <div class="price">‡ß≥${p.price}</div>
        <div style="font-size:13px; color:#888;">ID: ${p.id}</div>
      </div>
      <div class="actions">
        <button class="btn btn-outline view-btn" data-id="${p.id}">View</button>
        <button class="btn btn-primary order-btn" data-id="${p.id}">Order</button>
      </div>
    `;
    productGrid.appendChild(card);
  });

  Array.from(document.querySelectorAll(".view-btn")).forEach(btn=>btn.addEventListener("click",e=>openProductModal(e.currentTarget.dataset.id)));
  Array.from(document.querySelectorAll(".order-btn")).forEach(btn=>btn.addEventListener("click",e=>openProductModal(e.currentTarget.dataset.id)));
}

function openProductModal(id){
  const p = products.find(x=>x.id===id);
  if(!p) return;

  modalImg.src = p.img;
  modalTitle.textContent = p.name;
  modalDescription.textContent = p.desc;
  modalPrice.textContent = "‡ß≥" + p.price;
  modalPriceBig.textContent = "‡ß≥" + p.price;
  modalCategory.textContent = p.category + " ‚Ä¢ ";

  // Reset location selection and charge display when modal opens
  modalLocationSelect.value = "";
  modalChargeDisplay.style.display = "none";

  modalCallBtn.onclick = () => openLink(`tel:${SHOP_PHONE_TEL}`);

  modalWaBtn.onclick = () => {
    const selectedLocation = modalLocationSelect.value || "‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶® ‡¶¨‡¶æ‡¶õ‡¶æ‡¶á ‡¶π‡ßü‡¶®‡¶ø"; // Get from modal's select
    const deliveryCharge = locationCharges[selectedLocation] || 0;
    const waMessage = DEFAULT_WA_MESSAGE +
      `\nProduct: ${p.name} (ID: ${p.id})\nPrice: ‡ß≥${p.price}` +
      `\nLocation: ${selectedLocation}\nDelivery Charge: ‡ß≥${deliveryCharge}`;
    openLink(`https://wa.me/${SHOP_PHONE_WA}?text=${encodeURIComponent(waMessage)}`, true);
  };

  modalBackdrop.style.display = "flex";
}

closeModalBtn.onclick=()=>{ modalBackdrop.style.display="none"; }
modalBackdrop.addEventListener("click", e=>{ if(e.target===modalBackdrop) modalBackdrop.style.display="none"; });

floatCall.onclick=()=>openLink(`tel:${SHOP_PHONE_TEL}`);
floatWa.onclick=()=>openLink(`https://wa.me/${SHOP_PHONE_WA}?text=${encodeURIComponent(DEFAULT_WA_MESSAGE)}`,true);

renderProducts(products);

searchInput.addEventListener("input", ()=>{
  const q = searchInput.value.trim().toLowerCase();
  const filtered = products.filter(p=>p.name.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q));
  renderProducts(filtered);
});

// Event listener for the location select INSIDE the modal
modalLocationSelect.addEventListener("change", ()=>{
  const val = modalLocationSelect.value;
  if(!val){ 
    modalChargeDisplay.style.display="none"; 
    return; 
  }
  const charge = locationCharges[val] || 0;
  modalChargeSpan.textContent = charge;
  modalChargeDisplay.style.display="block";
});
</script>
</body>
</html>